import{r as o,j as e,H as j,L as l,b as p}from"./app-5ZfybEV2.js";import{A as f}from"./AuthenticatedLayout-DRS-vvgZ.js";import"./ApplicationLogo-DFhetW5_.js";import"./transition-A4Y2unN2.js";function k({news:c}){const[s,h]=o.useState(null),[d,i]=o.useState({show:!1,item:null}),[a,r]=o.useState(!1),n=t=>new Date(t).toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),m=t=>{const x={draft:{color:"bg-gray-100 text-gray-800",label:"下書き"},published:{color:"bg-green-100 text-green-800",label:"公開中"},hidden:{color:"bg-red-100 text-red-800",label:"非公開"}},g=x[t]||x.draft;return e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${g.color}`,children:g.label})},b=()=>{d.item&&(r(!0),p.delete(route("admin.news.destroy",d.item.id),{onSuccess:()=>{i({show:!1,item:null}),r(!1)},onError:()=>{r(!1),alert("削除に失敗しました。")}}))},u=t=>{t.status;const x=t.status==="published"?"このお知らせを非公開にしますか？":"このお知らせを公開しますか？";confirm(x)&&(r(!0),p.patch(route("admin.news.toggle-status",t.id),{},{onSuccess:()=>{r(!1)},onError:()=>{r(!1),alert("ステータスの変更に失敗しました。")}}))};return e.jsxs(f,{header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"お知らせ管理"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(l,{href:route("admin.news.create"),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded text-sm",children:"新規作成"}),e.jsx(l,{href:route("dashboard"),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded text-sm",children:"ダッシュボードに戻る"})]})]}),children:[e.jsx(j,{title:"お知らせ管理"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:s?e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"お知らせ詳細"}),e.jsx("button",{onClick:()=>h(null),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded text-sm",children:"一覧に戻る"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"タイトル"}),e.jsx("p",{className:"text-sm text-gray-900 bg-white p-2 rounded border",children:s.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ステータス"}),e.jsx("div",{className:"bg-white p-2 rounded border",children:m(s.status)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"公開日"}),e.jsx("p",{className:"text-sm text-gray-900 bg-white p-2 rounded border",children:s.published_at?n(s.published_at):"未設定"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"作成日時"}),e.jsx("p",{className:"text-sm text-gray-900 bg-white p-2 rounded border",children:n(s.created_at)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"本文"}),e.jsx("div",{className:"bg-white p-4 rounded border min-h-[200px]",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-900 font-sans",children:s.content})})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx(l,{href:route("admin.news.edit",s.id),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded text-sm",children:"編集"}),e.jsx("button",{onClick:()=>u(s),disabled:a,className:`font-bold py-2 px-4 rounded text-sm ${s.status==="published"?"bg-orange-600 hover:bg-orange-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:s.status==="published"?"非公開にする":"公開する"}),e.jsx("button",{onClick:()=>i({show:!0,item:s}),disabled:a,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded text-sm",children:"削除"})]})]})]})}):e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["お知らせ一覧 (",c.length,"件)"]})}),c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"お知らせがありません"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"最初のお知らせを作成してください。"}),e.jsx("div",{className:"mt-6",children:e.jsx(l,{href:route("admin.news.create"),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"お知らせを作成"})})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"タイトル"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ステータス"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"公開日"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"作成日時"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[t.title,t.is_important&&e.jsx("span",{className:"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"重要"})]}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:t.excerpt||(t.content.length>50?`${t.content.substring(0,50)}...`:t.content)})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m(t.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.published_at?n(t.published_at):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:n(t.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>h(t),className:"text-indigo-600 hover:text-indigo-900 bg-indigo-100 hover:bg-indigo-200 px-2 py-1 rounded text-xs transition-colors",children:"詳細"}),e.jsx(l,{href:route("admin.news.edit",t.id),className:"text-green-600 hover:text-green-900 bg-green-100 hover:bg-green-200 px-2 py-1 rounded text-xs transition-colors",children:"編集"})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>u(t),disabled:a,className:`px-2 py-1 rounded text-xs transition-colors ${t.status==="published"?"text-orange-600 hover:text-orange-900 bg-orange-100 hover:bg-orange-200":"text-blue-600 hover:text-blue-900 bg-blue-100 hover:bg-blue-200"}`,children:t.status==="published"?"非公開":"公開"}),e.jsx("button",{onClick:()=>i({show:!0,item:t}),disabled:a,className:"text-red-600 hover:text-red-900 bg-red-100 hover:bg-red-200 px-2 py-1 rounded text-xs transition-colors",children:"削除"})]})]})})]},t.id))})]})})]})})})}),d.show&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-2",children:"削除確認"}),e.jsxs("div",{className:"mt-2 px-7 py-3",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["「",d.item?.title,"」を削除しますか？"]}),e.jsx("p",{className:"text-sm text-red-600 mt-1",children:"この操作は取り消せません。"})]}),e.jsxs("div",{className:"flex justify-center space-x-4 px-4 py-3",children:[e.jsx("button",{onClick:()=>i({show:!1,item:null}),disabled:a,className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded text-sm",children:"キャンセル"}),e.jsx("button",{onClick:b,disabled:a,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded text-sm",children:a?"削除中...":"削除する"})]})]})})})]})}export{k as default};
